{% extends "base.html" %}
{% set title = "LoanSense • Predict" %}

{% block content %}
<section class="heroWrap">
  <div class="container">
    <div class="row g-4 align-items-stretch">
      <div class="col-lg-6">
        <div class="heroCard">
          <div class="pill">Next-Gen ML UI • Fast • Clean</div>
          <h1 class="heroTitle">Loan Approval Prediction</h1>
          <p class="heroText">
            Enter applicant details and get a modern, clean result with probability + helpful hints.
          </p>

          <div class="miniStats">
            <div class="miniStat">
              <div class="miniTop">Real-time</div>
              <div class="miniBig">Prediction</div>
            </div>
            <div class="miniStat">
              <div class="miniTop">Smart</div>
              <div class="miniBig">Hints</div>
            </div>
            <div class="miniStat">
              <div class="miniTop">Premium</div>
              <div class="miniBig">UI</div>
            </div>
          </div>

          <div class="quickLinks">
            <a class="qBtn" href="/about">About</a>
            <a class="qBtn" href="/reviews">Reviews</a>
          </div>
        </div>
      </div>

      <div class="col-lg-6">
        <div class="glassCard">
          <div class="cardHead">
            <div>
              <div class="cardTitle">Applicant Form</div>
              <div class="cardSub">DTI example: 0.35</div>
            </div>
          </div>

          {% if error %}
            <div class="alert alert-danger mt-3">
              <b>Fix this:</b> {{ error }}
            </div>
          {% endif %}

          <form action="/predict" method="POST" class="row g-3 mt-2">
            <div class="col-md-6">
              <label class="form-label">Age</label>
              <input class="form-control form-control-lg" name="Age" type="number" required
                     value="{{ form.Age if form else '' }}" placeholder="e.g. 28">
            </div>

            <div class="col-md-6">
              <label class="form-label">Income</label>
              <input class="form-control form-control-lg" name="Income" type="number" required
                     value="{{ form.Income if form else '' }}" placeholder="e.g. 60000">
            </div>

            <div class="col-md-6">
              <label class="form-label">Loan Amount</label>
              <input class="form-control form-control-lg" name="LoanAmount" type="number" required
                     value="{{ form.LoanAmount if form else '' }}" placeholder="e.g. 15000">
            </div>

            <div class="col-md-6">
              <label class="form-label">Credit Score</label>
              <input class="form-control form-control-lg" name="CreditScore" type="number" required
                     value="{{ form.CreditScore if form else '' }}" placeholder="e.g. 720">
            </div>

            <div class="col-md-6">
              <label class="form-label">DTI Ratio</label>
              <input class="form-control form-control-lg" name="DTIRatio" type="text" required
                     value="{{ form.DTIRatio if form else '' }}" placeholder="e.g. 0.35">
              <div class="helpText">DTI = total debt payments / income (0 to 1+)</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">Education</label>
              <select class="form-select form-select-lg" name="Education" required>
                <option value="" disabled {% if not form %}selected{% endif %}>Select</option>
                {% for opt in education_options %}
                  <option value="{{ opt }}" {% if form and form.Education == opt %}selected{% endif %}>{{ opt }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="col-12">
              <label class="form-label">Employment Type</label>
              <select class="form-select form-select-lg" name="EmploymentType" required>
                <option value="" disabled {% if not form %}selected{% endif %}>Select</option>
                {% for opt in employment_options %}
                  <option value="{{ opt }}" {% if form and form.EmploymentType == opt %}selected{% endif %}>{{ opt }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="col-12 d-grid mt-2">
              <button class="btn btnGlow btn-lg">Predict Now</button>
            </div>
          </form>

          <div class="divider"></div>

          <div class="microTips">
            <div class="microTip">✅ Credit score 700+ helps</div>
            <div class="microTip">✅ DTI below 0.40 is safer</div>
            <div class="microTip">✅ Stable employment matters</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
